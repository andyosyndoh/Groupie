{{define "navbar"}}
<link
    rel="stylesheet"
    href="../static/styles/navbar.css"
/>
<div class="navbar">
    <ul>
        <li>
            <a id="home" href="/">Groupie Tracker</a>
        </li>
    </ul>
    <!-- <div class="search-bar">
        <input type="text" id="search-bar" placeholder="search for artist" oninput="searchArtists()" autocomplete="off">
        <ul id="suggestions"></ul>
    </div>
     -->

     
</div>

<script>
async function searchArtists() {
    const query = document.getElementById('search-bar').value;
    const suggestionsList = document.getElementById('suggestions');
    
    if (query.length < 3) {
        suggestionsList.innerHTML = "";
        return;
    }
    
    try {
        const response = await fetch(`/api/search?q=${query}`);
        const results = await response.json();
        console.log('API Results:', results);
        
        suggestionsList.innerHTML = '';
        
        if (Array.isArray(results)) {
            results.forEach(item => {
                displaySuggestion(item, suggestionsList);
            });
        } else {
            console.error('Expected an array of results, but got:', typeof results);
        }
    } catch (error) {
        console.error('Error fetching or processing data:', error);
    }
}

function displaySuggestion(item, suggestionsList) {
    let li = document.createElement('li');
    li.textContent = `${item.name} - Artiste`;
    suggestionsList.appendChild(li);
}
</script>
{{end}}
